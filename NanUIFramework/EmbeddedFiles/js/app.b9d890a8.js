(function(t){function e(e){for(var a,o,l=e[0],c=e[1],r=e[2],m=0,d=[];m<l.length;m++)o=l[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,r||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,l=1;l<i.length;l++){var c=i[l];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var r=0;r<l.length;r++)e(l[r]);var u=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"098a":function(t,e,i){t.exports=i.p+"img/a2.a083c6f1.bmp"},2395:function(t,e,i){},"26cd":function(t,e,i){},"474b":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("ac1f"),i("5319"),i("a9e3"),i("b680");var a=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],o={data:function(){return{}},methods:{}},l=o,c=(i("7c55"),i("2877")),r=Object(c["a"])(l,s,n,!1,null,null,null),u=r.exports,m=i("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body",style:"height:"+(t.height-1)+"px",on:{click:t.bodyClick}},[a("SimulatedEnvironment",{attrs:{communication:t.communication},model:{value:t.SimulationTestShow,callback:function(e){t.SimulationTestShow=e},expression:"SimulationTestShow"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.WeighingAuthorityShow,expression:"WeighingAuthorityShow"}],staticClass:"modal"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-title"},[t._v("注册")]),a("div",{staticStyle:{padding:"0px 10px"}},[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[a("div",{staticClass:"input"},[a("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("账号")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.EquipmentIdentification,expression:"config.EquipmentIdentification"}],attrs:{disabled:""},domProps:{value:t.config.EquipmentIdentification},on:{input:function(e){e.target.composing||t.$set(t.config,"EquipmentIdentification",e.target.value)}}})])]),a("p"),a("div",{staticClass:"input"},[a("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("注册码")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.EquipmentIdentificationCode,expression:"config.EquipmentIdentificationCode"}],domProps:{value:t.config.EquipmentIdentificationCode},on:{input:function(e){e.target.composing||t.$set(t.config,"EquipmentIdentificationCode",e.target.value)}}})])])]),a("div",{staticStyle:{"text-align":"end"}},[a("vxe-button",{attrs:{content:"取消"},on:{click:function(e){t.WeighingAuthorityShow=!1}}}),a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:t.setWeighingAuthority_}})],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modelShow,expression:"modelShow"}],staticClass:"modal"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-title"},[t._v("提示")]),a("div",{staticStyle:{padding:"10px"}},[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[a("vxe-radio-group",{model:{value:t.tempFocus,callback:function(e){t.tempFocus=e},expression:"tempFocus"}},[a("vxe-radio",{attrs:{label:5,content:"称量配置"}}),a("vxe-radio",{attrs:{label:6,content:"数据配置"}}),a("vxe-radio",{attrs:{label:7,content:"称量记录"}})],1)],1),7!=t.tempFocus?a("div",{staticClass:"input"},[a("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("密码")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.upwd,expression:"upwd"}],attrs:{type:"password"},domProps:{value:t.upwd},on:{input:function(e){e.target.composing||(t.upwd=e.target.value)}}})])]):t._e(),a("div",{staticStyle:{"text-align":"end","padding-top":"10px"}},[a("vxe-button",{attrs:{content:"取消"},on:{click:function(e){t.modelShow=!1}}}),a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:t.madolOk}})],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dyeingClassShow,expression:"dyeingClassShow"}],staticClass:"modal"},[a("div",{staticClass:"modal-body",staticStyle:{height:"300px"}},[a("div",{staticClass:"modal-title"},[t._v("请选择当前料单的编号")]),a("div",{staticStyle:{padding:"10px"}},[a("div",{staticStyle:{height:"195px"}},[a("vxe-select",{ref:"vxeSelect",attrs:{placeholder:"请选择"},model:{value:t.RequltData.dyeingClass,callback:function(e){t.$set(t.RequltData,"dyeingClass",e)},expression:"RequltData.dyeingClass"}},t._l(t.dyeingClassList,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t,label:t}})})),1)],1),a("div",{staticStyle:{"text-align":"end"}},[a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:t.dyeingClassSave}})],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.CompletionPrompt,expression:"CompletionPrompt"}],staticClass:"modal"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-title"},[t._v("提示")]),a("div",{staticStyle:{padding:"10px"}},[a("div",{staticStyle:{"margin-bottom":"15px","text-align":"center","font-weight":"bold","font-size":"30px"}},[t._v(" 单前料单已完成 ")]),a("div",{staticStyle:{"text-align":"end","padding-top":"10px"}},[a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:function(e){t.CompletionPrompt=!1}}})],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.manualLockShow,expression:"manualLockShow"}],staticClass:"modal"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-title"},[t._v("提示")]),a("div",{staticStyle:{padding:"10px"}},[a("div",{staticClass:"input"},[a("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("密码")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.manualLockUpwd,expression:"manualLockUpwd"}],attrs:{type:"password"},domProps:{value:t.manualLockUpwd},on:{input:function(e){e.target.composing||(t.manualLockUpwd=e.target.value)}}})])]),a("div",{staticStyle:{"text-align":"end","padding-top":"10px"}},[a("vxe-button",{attrs:{content:"取消"},on:{click:function(e){t.manualLockShow=!1}}}),a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:function(e){return t.manualLockOk(1)}}})],1)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.focus<5,expression:"focus < 5"}]},[a("div",{staticClass:"nav"},[a("h1",{staticClass:"title"},[a("img",{staticClass:"logo",attrs:{src:i("cf05"),width:"30",height:"40"}}),t._v("东恒智能科技助剂称量系统 "),a("span",{staticStyle:{"font-size":"15.75px"}},[t._v(" "+t._s(t.dayTime))]),a("span",{style:{color:"1"==t.WeighingAuthority?"":"red"},on:{click:t.setWeighingAuthority}},[t._v(" "+t._s("1"==t.WeighingAuthority?"已注册":"未注册"))])]),a("span",{staticClass:"btns"},[a("vxe-button",{attrs:{status:"primary",content:"重置"},on:{click:function(e){return t.ResetData(1)}}}),a("vxe-button",{attrs:{status:"primary",content:"设置"},on:{click:function(e){return t.GetConfig()}}}),a("vxe-button",{attrs:{status:"danger",icon:"vxe-icon--close"},on:{click:t.close}})],1)]),a("div",{staticClass:"row",staticStyle:{"padding-left":"10px","margin-top":"10px"}},[a("div",{staticClass:"col",style:"width:33.33%;padding-right:10px;height:"+.3*t.height+"px"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("料单号")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemNo,expression:"itemNo"}],ref:"itemNo",staticStyle:{color:"#1176d4","font-size":"25px","font-weight":"bold"},attrs:{id:"itemNo",type:"text"},domProps:{value:t.itemNo},on:{blur:t.blur,focus:t.blur,dblclick:t.inputDblclick,input:function(e){e.target.composing||(t.itemNo=e.target.value)}}}),a("input",{ref:"itemNo_off",staticClass:"itemNo_off",attrs:{type:"text"}})])]),a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("布    重")]),a("span",{staticClass:"value",staticStyle:{color:"#1176d4","font-size":"25px","font-weight":"bold"}},[t._v(t._s(t.formData.clothWeight||"")+" "),t.formData.clothWeight?a("span",[t._v(t._s(t.formData.unit||""))]):t._e()])]),a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("颜    色")]),a("span",{staticClass:"value",staticStyle:{color:"#1176d4","font-size":"25px","font-weight":"bold"}},[t._v(t._s(t.formData.color||""))])]),a("div",[a("p",{staticStyle:{padding:"6px 0px"}},[a("span",{staticClass:"communicationStatus"},[t._v("后台服务状态 "),t.dataStart?a("i",{staticClass:"vxe-icon--refresh roll c_g"}):a("i",{staticClass:"vxe-icon--warning c_r"})]),a("span",{staticClass:"communicationStatus",staticStyle:{"padding-right":"10px","text-align":"end"}},[t._v(" PLC状态 "),t.COMStart[0]<6?a("i",{staticClass:"vxe-icon--refresh roll c_g"}):a("i",{staticClass:"vxe-icon--warning c_r"})])]),a("p"),a("p",{staticClass:"callStart"},[a("span",{staticClass:"callStartItem",staticStyle:{"text-align":"start"}},[t._v(" A称 "),t.COMStart[1]<6?a("i",{staticClass:"vxe-icon--refresh roll c_g"}):a("i",{staticClass:"vxe-icon--warning c_r"})]),a("span",{staticClass:"callStartItem"},[t._v(" B称 "),t.COMStart[2]<6?a("i",{staticClass:"vxe-icon--refresh roll c_g"}):a("i",{staticClass:"vxe-icon--warning c_r"})]),a("span",{staticClass:"callStartItem",staticStyle:{"text-align":"end","padding-right":"10px"}},[t._v(" C称 "),t.COMStart[3]<6?a("i",{staticClass:"vxe-icon--refresh roll c_g"}):a("i",{staticClass:"vxe-icon--warning c_r"})])]),a("p",{staticClass:"resInfo"},[t._v("响应信息:"+t._s(t.formData.message))])])]),a("div",{staticClass:"col detailed",style:"width:66.6%;padding-right:10px;height:"+.3*t.height+"px"},[a("vxe-table",{ref:"detailedTable",attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",data:t.list,height:.3*t.height-10,"row-class-name":t.rowClassName},on:{"cell-click":t.cellClick}},[a("vxe-column",{attrs:{type:"seq",title:"序号",width:"60"}}),a("vxe-column",{attrs:{field:"code",title:"物料编号",width:"100"}}),a("vxe-column",{attrs:{field:"codeName",title:"物料名称"}}),a("vxe-column",{attrs:{field:"demandWeight",title:"用量",width:"120"}}),a("vxe-column",{attrs:{field:"unit",title:"单位",width:"100"}})],1)],1)]),a("div",{staticClass:"row t_a_c",staticStyle:{"padding-left":"10px"}},t._l(t.listAll,(function(e,i){return i>0?a("div",{key:i,staticClass:"col",style:{width:"33.3%",paddingRight:"10px",height:.68*t.height-70+"px"}},[a("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",data:t.listAll[i],height:160,"row-class-name":t.rowClassName},on:{"cell-click":t.cellClick}},[a("vxe-column",{attrs:{field:"code",title:"物料编号",width:"80"}}),a("vxe-column",{attrs:{field:"codeName",title:"物料名称"}}),a("vxe-column",{attrs:{field:"demandWeight",title:"用量",width:"90"}}),a("vxe-column",{attrs:{field:"unit",title:"单位",width:"60"}})],1),a("div",{staticClass:"callItem"},[a("div",{staticClass:"callItemHaed"},[a("span",{staticClass:"callNum"},[t._v(t._s(t.setAddress(i)))]),a("p",[a("span",[t._v("物料名称:")]),-1!=t.formData.WeighingInformation[i].feedingStatus?a("span",[t._v(t._s(t.formData.WeighingInformation[i].codeName))]):t._e()]),a("p",[a("span",[t._v("物料编码:")]),-1!=t.formData.WeighingInformation[i].feedingStatus?a("span",[t._v(t._s(t.formData.WeighingInformation[i].code))]):t._e()])]),a("div",{staticClass:"callItemCall"},[a("img",{staticClass:"imgs",attrs:{src:t.setImage(t.formData.WeighingInformation[i].feedingStatus,i),alt:""}}),a("div",{staticClass:"portResult"},[t._v(t._s(t.setKg(t.portResult[i]))+" "),a("span",{staticClass:"portResultUnit"},[t._v(t._s(t.config.viewUnit||"kg"))])]),a("div",{staticClass:"WeighingInfoClass"},[t._v(" "+t._s(t.setWeighingInfo(t.formData.WeighingInformation[i].feedingStatus))+" ")]),a("div",{staticClass:"callAggregateValue"},[a("div",{staticClass:"items"},[a("p",[t._v("目标重量")]),a("p",{staticClass:"itemValue"},[-1!=t.formData.WeighingInformation[i].feedingStatus?a("span",[t._v(t._s(t.setKg(t.formData.WeighingInformation[i].demandWeight)))]):t._e()])]),a("div",{staticClass:"items"},[a("p",[t._v("实际称量")]),a("p",{staticClass:"itemValue",staticStyle:{color:"red"}},[-1!=t.formData.WeighingInformation[i].feedingStatus?a("span",[t._v(t._s(t.setKg(t.formData.WeighingInformation[i].total)))]):t._e()])]),a("div",{staticClass:"items"},[a("p",[t._v("差  异  值")]),a("p",{staticClass:"itemValue"},[-1!=t.formData.WeighingInformation[i].feedingStatus?a("span",[t._v(t._s(t.setKg(t.formData.WeighingInformation[i].difference)))]):t._e()])])]),a("div",{staticClass:"mainPageWaterLevel"},t._l(6,(function(e){return a("div",{key:"item_",staticClass:"waterLevelItem"},[a("div",{staticClass:"waterLevelItemBG",class:{alarmWaterLevel:t.waterLevelList[6*(i-1)+e-1].VAD<t.config.alarmWaterLevel1},style:{top:100-t.waterLevelList[6*(i-1)+e-1].PAD+"%"}}),a("p",{staticClass:"waterLevelItemValue"},[t._v(t._s(t.$toFixed_1(t.waterLevelList[6*(i-1)+e-1].VAD)))]),a("p",{staticClass:"waterLevelItemName"},[t._v(t._s(1==i?"A":2==i?"B":"C")+t._s(e))])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.itemMadolShow[i],expression:"itemMadolShow[index]"}],ref:"itemMadol"+i,refInFor:!0,staticClass:"itemMadol",class:t.focus==i?"itemMadol_focus":""},[a("div",{staticStyle:{padding:"15px"}},[t._v(" "+t._s(4==t.formData.WeighingInformation[i].feedingStatus?"加料异常":8==t.formData.WeighingInformation[i].feedingStatus?"已完成":2==t.formData.WeighingInformation[i].feedingStatus||3==t.formData.WeighingInformation[i].feedingStatus?"已满;请换桶":"")+" ")]),a("div",{staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:function(e){return t.ResetData(2)}}})],1)])])],1):t._e()})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.focus,expression:"focus == 5"}],staticClass:"config"},[a("p",[t._v(" 称量参数配置    "),a("vxe-checkbox",{attrs:{content:"加色/补色合并时提示"},model:{value:t.config.dyeingClass,callback:function(e){t.$set(t.config,"dyeingClass",e)},expression:"config.dyeingClass"}})],1),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("桶容量")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.capacity,expression:"config.capacity"}],domProps:{value:t.config.capacity},on:{input:function(e){e.target.composing||t.$set(t.config,"capacity",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("误差量")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.allowableError,expression:"config.allowableError"}],domProps:{value:t.config.allowableError},on:{input:function(e){e.target.composing||t.$set(t.config,"allowableError",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("减速位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.reduce,expression:"config.reduce"}],domProps:{value:t.config.reduce},on:{input:function(e){e.target.composing||t.$set(t.config,"reduce",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("稳定时间")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.StopTime,expression:"config.StopTime"}],domProps:{value:t.config.StopTime},on:{input:function(e){e.target.composing||t.$set(t.config,"StopTime",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("稳定系数")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.stableValue,expression:"config.stableValue"}],domProps:{value:t.config.stableValue},on:{input:function(e){e.target.composing||t.$set(t.config,"stableValue",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label",staticStyle:{width:"105px","white-space":"nowrap"}},[t._v("稳定系数(小)")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.minStableValue,expression:"config.minStableValue"}],domProps:{value:t.config.minStableValue},on:{input:function(e){e.target.composing||t.$set(t.config,"minStableValue",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("小数点位数")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.decimalPlaces,expression:"config.decimalPlaces"}],domProps:{value:t.config.decimalPlaces},on:{input:function(e){e.target.composing||t.$set(t.config,"decimalPlaces",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("称系数")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.decimalPlaces1,expression:"config.decimalPlaces1"}],domProps:{value:t.config.decimalPlaces1},on:{input:function(e){e.target.composing||t.$set(t.config,"decimalPlaces1",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("显示单位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.viewUnit,expression:"config.viewUnit"}],domProps:{value:t.config.viewUnit},on:{input:function(e){e.target.composing||t.$set(t.config,"viewUnit",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("补偿量")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.compensate,expression:"config.compensate"}],domProps:{value:t.config.compensate},on:{input:function(e){e.target.composing||t.$set(t.config,"compensate",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("补偿系数")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.compensationCoefficient,expression:"config.compensationCoefficient"}],domProps:{value:t.config.compensationCoefficient},on:{input:function(e){e.target.composing||t.$set(t.config,"compensationCoefficient",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("小阀值")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.smallValve,expression:"config.smallValve"}],domProps:{value:t.config.smallValve},on:{input:function(e){e.target.composing||t.$set(t.config,"smallValve",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("低水位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.alarmWaterLevel1,expression:"config.alarmWaterLevel1"}],domProps:{value:t.config.alarmWaterLevel1},on:{input:function(e){e.target.composing||t.$set(t.config,"alarmWaterLevel1",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("高水位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.alarmWaterLevel2,expression:"config.alarmWaterLevel2"}],domProps:{value:t.config.alarmWaterLevel2},on:{input:function(e){e.target.composing||t.$set(t.config,"alarmWaterLevel2",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("满水位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.maxWaterLevel,expression:"config.maxWaterLevel"}],domProps:{value:t.config.maxWaterLevel},on:{input:function(e){e.target.composing||t.$set(t.config,"maxWaterLevel",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("水位单位")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.WaterLevelNuit,expression:"config.WaterLevelNuit"}],domProps:{value:t.config.WaterLevelNuit},on:{input:function(e){e.target.composing||t.$set(t.config,"WaterLevelNuit",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("手动密码")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.manualLock,expression:"config.manualLock"}],domProps:{value:t.config.manualLock},on:{input:function(e){e.target.composing||t.$set(t.config,"manualLock",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("桶重量")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.barrelWeight,expression:"config.barrelWeight"}],domProps:{value:t.config.barrelWeight},on:{input:function(e){e.target.composing||t.$set(t.config,"barrelWeight",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("语速")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.rate,expression:"config.rate"}],domProps:{value:t.config.rate},on:{input:function(e){e.target.composing||t.$set(t.config,"rate",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("播报次数")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.rateNum,expression:"config.rateNum"}],domProps:{value:t.config.rateNum},on:{input:function(e){e.target.composing||t.$set(t.config,"rateNum",e.target.value)}}})])])]),a("p",[t._v("管道设置")]),a("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",data:t.config.materials,height:t.height-310,"edit-config":{trigger:"click",mode:"cell"}}},[a("vxe-column",{attrs:{type:"seq",title:"序号",width:"60"}}),a("vxe-column",{attrs:{field:"pipe",title:"管道号"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("span",[t._v(" "+t._s(t.setPipe(i.pipe))+" ")])]}}])}),a("vxe-column",{attrs:{field:"code",title:"助剂编号","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"codeName",title:"助剂名称","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"flow",title:"流量系数","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"minFlow",title:"流量系数(小)","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"reduce",title:"减速位","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"minReduce",title:"减速位(小)","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"startBit",title:"小阀启动位","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"StopTime",title:"稳定时间(小)","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"blankingAlarm",title:"下料异常报警"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("span",[a("vxe-checkbox",{attrs:{content:"","checked-value":1,"unchecked-value":0},model:{value:i.blankingAlarm,callback:function(e){t.$set(i,"blankingAlarm",e)},expression:"row.blankingAlarm"}})],1)]}}])})],1),a("span",{staticClass:"submit"},[a("vxe-button",{attrs:{status:"primary",content:"返回"},on:{click:function(e){t.focus=0}}}),a("vxe-button",{attrs:{status:"primary",content:"水位效正"},on:{click:function(e){t.focus=8}}}),a("vxe-button",{attrs:{status:"primary",content:"保存关闭"},on:{click:function(e){return t.SetConfig(1)}}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:6==t.focus,expression:"focus == 6"}],staticClass:"config"},[a("p",[t._v("ERP数据对接配置")]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10",staticStyle:{overflow:"visible"}},[a("span",{staticClass:"label"},[t._v("对接方式")]),a("span",{staticClass:"value vxeSelect"},[a("vxe-select",{attrs:{size:"medium"},model:{value:t.config.way,callback:function(e){t.$set(t.config,"way",e)},expression:"config.way"}},t._l(t.config.ways,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t.way,label:t.name}})})),1)],1)])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("用户")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.user,expression:"config.user"}],domProps:{value:t.config.user},on:{input:function(e){e.target.composing||t.$set(t.config,"user",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("密码")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.upwd,expression:"config.upwd"}],domProps:{value:t.config.upwd},on:{input:function(e){e.target.composing||t.$set(t.config,"upwd",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("IP地址")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.ip,expression:"config.ip"}],domProps:{value:t.config.ip},on:{input:function(e){e.target.composing||t.$set(t.config,"ip",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("端口号")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.port,expression:"config.port"}],domProps:{value:t.config.port},on:{input:function(e){e.target.composing||t.$set(t.config,"port",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("库名称")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.tableName,expression:"config.tableName"}],domProps:{value:t.config.tableName},on:{input:function(e){e.target.composing||t.$set(t.config,"tableName",e.target.value)}}})])])]),a("span",{staticClass:"item15"},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("PLC版本号")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.verstionPlc,expression:"config.verstionPlc"}],domProps:{value:t.config.verstionPlc},on:{input:function(e){e.target.composing||t.$set(t.config,"verstionPlc",e.target.value)}}})])])]),a("span",{staticClass:"item15",staticStyle:{width:"98%"}},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("登录/单头")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.connect1,expression:"config.connect1"}],domProps:{value:t.config.connect1},on:{input:function(e){e.target.composing||t.$set(t.config,"connect1",e.target.value)}}})])])]),a("span",{staticClass:"item15",staticStyle:{width:"98%"}},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("物料列表")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.connect2,expression:"config.connect2"}],domProps:{value:t.config.connect2},on:{input:function(e){e.target.composing||t.$set(t.config,"connect2",e.target.value)}}})])])]),a("span",{staticClass:"item15",staticStyle:{width:"98%"}},[a("div",{staticClass:"input m_b10"},[a("span",{staticClass:"label"},[t._v("完成回调")]),a("span",{staticClass:"value"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.config.connect3,expression:"config.connect3"}],domProps:{value:t.config.connect3},on:{input:function(e){e.target.composing||t.$set(t.config,"connect3",e.target.value)}}})])])]),a("p",[t._v("串口设置")]),a("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",data:t.config.fns,"edit-config":{trigger:"click",mode:"cell"}}},[a("vxe-column",{attrs:{type:"seq",title:"序号",width:"60"}}),a("vxe-column",{attrs:{field:"address",title:"功能名称"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("span",[t._v(" "+t._s(t.setAddress(i.address))+" ")])]}}])}),a("vxe-column",{attrs:{field:"com",title:"串口号","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"baudRate",title:"波特率","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}})],1),a("span",{staticClass:"submit"},[a("vxe-button",{attrs:{status:"primary",content:"返回"},on:{click:function(e){t.focus=0}}}),a("vxe-button",{attrs:{status:"primary",content:"模拟测试"},on:{click:t.setSimulationTestShow}}),a("vxe-button",{attrs:{status:"primary",content:"注册"},on:{click:function(e){t.registerShow=!0}}}),a("vxe-button",{attrs:{status:"primary",content:"小程序注册设置"},on:{click:function(e){t.appletRegisterShow=!0}}}),a("vxe-button",{attrs:{status:"primary",content:"班次设置"},on:{click:function(e){t.shiftConfigShow=!0}}}),a("vxe-button",{attrs:{status:"primary",content:"保存关闭"},on:{click:function(e){return t.SetConfig(1)}}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:7==t.focus,expression:"focus == 7"}],staticClass:"config"},[a("p",[a("vxe-input",{attrs:{placeholder:"开始时间",type:"date"},model:{value:t.SelectTime.startTime,callback:function(e){t.$set(t.SelectTime,"startTime",e)},expression:"SelectTime.startTime"}}),t._v(" - "),a("vxe-input",{attrs:{placeholder:"结束时间",type:"date"},model:{value:t.SelectTime.endTime,callback:function(e){t.$set(t.SelectTime,"endTime",e)},expression:"SelectTime.endTime"}}),t._v("  "),a("vxe-button",{attrs:{status:"primary",content:"查询"},on:{click:t.quertRceord}}),a("span",{staticClass:"submit"},[a("vxe-button",{attrs:{status:"primary",content:"返回"},on:{click:function(e){t.focus=0}}})],1)],1),a("div",[a("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",data:t.recordData,height:t.height-100}},[a("vxe-column",{attrs:{field:"itemNo",title:"料单号",width:"200"}}),a("vxe-column",{attrs:{field:"code",title:"物料编号",width:"85"}}),a("vxe-column",{attrs:{field:"codeName",title:"物料名称"}}),a("vxe-column",{attrs:{field:"demandWeight",title:"需求重量",width:"100"}}),a("vxe-column",{attrs:{field:"weight",title:"实际下料重量",width:"100"}}),a("vxe-column",{attrs:{field:"saveTime",title:"下料时间",width:"200"}}),a("vxe-column",{attrs:{field:"pId",title:"物料行ID",width:"85"}})],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:8==t.focus,expression:"focus == 8"}]},[a("WaterLevel",{ref:"waterLevel",on:{initFocus:t.initFocus}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:9==t.focus,expression:"focus == 9"}]},[a("Manual",{ref:"manual",attrs:{config:t.config,focusLock:t.modelShow||t.dyeingClassShow||t.WeighingAuthorityShow||t.manualLockShow,modeSwitch:t.modeSwitch},on:{manualLockOk:t.manualLockOk,initFocus:t.initFocus,GetConfig:t.GetConfig,close:t.close,blur:t.blur},model:{value:t.modeSwitch,callback:function(e){t.modeSwitch=e},expression:"modeSwitch"}})],1),a("vxe-modal",{attrs:{width:"700"},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"shiftConfig"},[a("div",[a("p",[a("span",{staticStyle:{display:"inline-block",width:"230px","margin-right":"10px"}},[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("班次标识")]),a("span",[a("vxe-select",{attrs:{size:"small"},model:{value:t.shiftConfig.code,callback:function(e){t.$set(t.shiftConfig,"code",e)},expression:"shiftConfig.code"}},t._l(t.shiftIdentification,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t.code,label:t.name}})})),1)],1)])]),a("span",{staticStyle:{display:"inline-block",width:"230px","margin-right":"10px"}},[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("班次名称")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shiftConfig.codeName,expression:"shiftConfig.codeName"}],domProps:{value:t.shiftConfig.codeName},on:{input:function(e){e.target.composing||t.$set(t.shiftConfig,"codeName",e.target.value)}}})])])]),a("span",{staticStyle:{display:"inline-block",width:"230px","margin-right":"10px"}},[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("上班时间")]),a("span",[a("vxe-select",{attrs:{size:"small"},model:{value:t.shiftConfig.startTime,callback:function(e){t.$set(t.shiftConfig,"startTime",e)},expression:"shiftConfig.startTime"}},t._l(t.shiftConfigTime,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t,label:t}})})),1)],1)])]),a("span",{staticStyle:{display:"inline-block",width:"230px","margin-right":"10px"}},[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("下班时间")]),a("span",[a("vxe-select",{attrs:{size:"small"},model:{value:t.shiftConfig.endTime,callback:function(e){t.$set(t.shiftConfig,"endTime",e)},expression:"shiftConfig.endTime"}},t._l(t.shiftConfigTime,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t,label:t}})})),1)],1)])]),a("vxe-button",{attrs:{status:"primary",content:"添加"},on:{click:t.addShift}})],1),a("div",[a("vxe-table",{attrs:{border:"","show-header-overflow":"","show-overflow":"",align:"center",height:"300px",data:t.shiftsConfig,"edit-config":{trigger:"click",mode:"cell"}}},[a("vxe-column",{attrs:{type:"seq",title:"序号",width:"60"}}),a("vxe-column",{attrs:{field:"shiftType",title:"班次标识"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("div",{staticStyle:{padding:"5px 0px"}},[a("vxe-select",{attrs:{size:"small",disabled:""},model:{value:i.shiftType,callback:function(e){t.$set(i,"shiftType",e)},expression:"row.shiftType"}},t._l(t.shiftIdentification,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t.code,label:t.name}})})),1)],1)]}}])}),a("vxe-column",{attrs:{field:"shiftName",title:"班次名称","edit-render":{name:"input",attrs:{type:"text"},autoselect:!0}}}),a("vxe-column",{attrs:{field:"shiftCreateTime",title:"上班时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("vxe-select",{attrs:{size:"small"},model:{value:i.shiftCreateTime,callback:function(e){t.$set(i,"shiftCreateTime",e)},expression:"row.shiftCreateTime"}},t._l(t.shiftConfigTime,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t,label:t}})})),1)]}}])}),a("vxe-column",{attrs:{field:"shiftEndTime",title:"下班时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.rowIndex;return[a("vxe-select",{attrs:{size:"small"},model:{value:i.shiftEndTime,callback:function(e){t.$set(i,"shiftEndTime",e)},expression:"row.shiftEndTime"}},t._l(t.shiftConfigTime,(function(t,e){return a("vxe-option",{key:e,attrs:{value:t,label:t}})})),1)]}}])}),a("vxe-column",{attrs:{field:"action",title:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){e.row,e.rowIndex;return[a("vxe-button",{attrs:{content:"删除",status:"danger",size:"small"},on:{click:t.delShift}})]}}])})],1)],1)]),a("p",{staticStyle:{"text-align":"end","padding-top":"10px"}},[a("vxe-button",{attrs:{content:"取消"},on:{click:function(e){t.shiftConfigShow=!1}}}),a("vxe-button",{attrs:{status:"primary",content:"保存"},on:{click:t.submitShift}})],1)])]},proxy:!0}]),model:{value:t.shiftConfigShow,callback:function(e){t.shiftConfigShow=e},expression:"shiftConfigShow"}}),a("vxe-modal",{attrs:{width:"580",title:"远程服务器配置"},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",[a("div",[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("注册码")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registerConfig.invitationCode,expression:"registerConfig.invitationCode"}],domProps:{value:t.registerConfig.invitationCode},on:{input:function(e){e.target.composing||t.$set(t.registerConfig,"invitationCode",e.target.value)}}})])]),a("div",{staticStyle:{"padding-top":"10px","text-align":"end"}},[a("vxe-button",{attrs:{content:"取消"},on:{click:function(e){t.registerShow=!1}}}),a("vxe-button",{attrs:{status:"primary",content:"注册"},on:{click:t.submitRegistry}})],1)])])]},proxy:!0}]),model:{value:t.registerShow,callback:function(e){t.registerShow=e},expression:"registerShow"}}),a("vxe-modal",{attrs:{width:"580",title:"小程序注册设置"},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",[a("div",[a("div",[a("div",{staticClass:"multiColumn m_b10"},[a("span",{staticStyle:{width:"90px"}},[t._v("电话")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registerConfigTelephone,expression:"registerConfigTelephone"}],domProps:{value:t.registerConfigTelephone},on:{input:function(e){e.target.composing||(t.registerConfigTelephone=e.target.value)}}})]),a("span",{staticStyle:{width:"80px",cursor:"pointer","font-size":"18px"},on:{click:t.addTelephone}},[t._v(" 添加 ")])])]),a("div",{staticStyle:{height:"161px",overflow:"auto"}},t._l(t.corpratePhoneList,(function(e,i){return a("p",{key:i,staticClass:"telephoneItem"},[a("span",{staticStyle:{"font-size":"18px","font-weight":"bold"}},[t._v(" "+t._s(e.corporatePhone))]),a("span",{staticStyle:{float:"right"}},[a("vxe-button",{attrs:{content:"删除",status:"danger",size:"small"},on:{click:function(e){return t.delRow(i)}}})],1)])})),0),a("div",{staticStyle:{"padding-top":"10px","text-align":"end"}},[a("vxe-button",{attrs:{content:"关闭"},on:{click:function(e){t.appletRegisterShow=!1}}})],1)])])]},proxy:!0}]),model:{value:t.appletRegisterShow,callback:function(e){t.appletRegisterShow=e},expression:"appletRegisterShow"}})],1)},f=[],p=i("2909"),g=(i("a15b"),i("1276"),i("e9c4"),i("d3b7"),i("159b"),i("99af"),i("4de4"),i("a434"),i("00b4"),i("ef4f")),v=i.n(g),h=i("098a"),w=i.n(h),C=i("e9f2"),_=i.n(C),y=i("6d18"),x=i.n(y),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.value?i("div",{staticClass:"SimulationTest"},[i("div",{staticClass:"pipeAll"},[t._l(t.ResultSet,(function(e,a){return i("div",{key:a,staticClass:"pipeAllItem"},[i("p",[i("vxe-button",{attrs:{status:"primary",content:"启动"},on:{click:function(e){return t.startPlc(a+1)}}}),i("vxe-button",{attrs:{status:"primary",content:"加桶"},on:{click:function(e){return t.addBucket(a+1)}}}),i("vxe-button",{attrs:{status:"primary",content:"清零"},on:{click:function(e){return t.resetCall(a+1)}}})],1)])})),i("vxe-button",{attrs:{status:"primary",content:"关闭"},on:{click:t.quitSimulationTest}})],2)]):t._e()},S=[],k={props:["value","communication"],data:function(){return{bucketAll:[{capacity:1e6,id:1},{capacity:1e6,id:2},{capacity:1e6,id:3},{capacity:1e6,id:4},{capacity:1e6,id:5},{capacity:1e6,id:6},{capacity:1e6,id:7},{capacity:1e6,id:8},{capacity:1e6,id:9},{capacity:1e6,id:10},{capacity:1e6,id:11},{capacity:1e6,id:12},{capacity:1e6,id:13},{capacity:1e6,id:14},{capacity:1e6,id:15},{capacity:1e6,id:16},{capacity:1e6,id:17},{capacity:1e6,id:18}],BarrelWeight:120,pipes:[0,0,0,0,0,0],pipeAll:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ResultSet:[0,0,0],plcStart:[0,0,0,0,0]}},methods:{addBucket:function(t){__communication.addBucket(t+"")},startPlc:function(t){__communication.startPlc(t+"")},resetCall:function(t){__communication.resetCall(t+"")},quitSimulationTest:function(){__communication.quitSimulationTest(),this.$emit("input",!1)}},mounted:function(){}},N=k,W=(i("e9ae"),Object(c["a"])(N,b,S,!1,null,"19811875",null)),D=W.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manual",staticStyle:{height:"100%"}},[a("div",{staticClass:"manualNav"},[a("div",{staticClass:"nav"},[a("h1",{staticClass:"title"},[a("img",{staticClass:"logo",attrs:{src:i("cf05"),width:"30",height:"40"}}),t._v("东恒智能科技助剂称量系统 "),a("span",{staticStyle:{"font-size":"15.75px"}},[t._v(" "+t._s(t.dayTime))]),a("span",{style:{color:"1"==t.WeighingAuthority?"":"red"},on:{click:function(e){return t.$emit("setWeighingAuthority")}}},[t._v(" "+t._s("1"==t.WeighingAuthority?"已注册":"未注册"))])]),a("span",{staticClass:"btns"},[a("vxe-button",{attrs:{status:"primary",content:"设置"},on:{click:function(e){return t.GetConfig()}}}),a("vxe-button",{attrs:{status:"danger",icon:"vxe-icon--close"},on:{click:function(e){return t.$emit("close")}}})],1)])]),a("div",{staticClass:"manualBody",style:"height:"+(t.height-60)+"px"},[a("div",{staticClass:"manualBodyLeft"},t._l(t.list,(function(e,i){return i<18?a("div",{key:i,class:{manualItem:!0,actionManual:e.pipe==t.selectRow.pipe},on:{click:function(i){return t.setSelectRow(e)}}},[a("div",{staticClass:"waterLevelItemBG",class:{alarmWaterLevel:e.VAD<t.config.alarmWaterLevel1},style:{top:100-(e.PAD||0)+"%"}}),a("div",{staticClass:"manualItem1"},[a("p",[a("span",{staticClass:"pipe",class:{selectPipe:e.pipe==t.selectRow.pipe}},[t._v(t._s(t.setPipe(e.pipe)))]),a("span",{staticClass:"itemVAD"},[t._v(t._s(t.setToFixed(e.VAD))+t._s(t.config.WaterLevelNuit))])]),a("p",{staticClass:"code"},[t._v(t._s(e.code))]),a("p",{staticClass:"codeName"},[t._v(t._s(e.codeName))])])]):t._e()})),0),a("div",{staticClass:"manualBodyRight",style:{height:t.height-420-55+"px"}},[a("div",{staticClass:"pattern"},[a("p",{staticClass:"patternItem"},[t._v("非")]),a("p",{staticClass:"patternItem"},[t._v("料")]),a("p",{staticClass:"patternItem"},[t._v("单")]),a("p",{staticClass:"patternItem"},[t._v("模")]),a("p",{staticClass:"patternItem"},[t._v("式")]),a("input",{ref:"demandWeight_",staticStyle:{display:"none"}})]),a("div",{staticClass:"BlankingTask"},[a("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"100px"}},[t._v("物料名称")]),a("div",{staticStyle:{"font-size":"20px","padding-left":"5px"}},[t._v(" "+t._s(t.selectRow.codeName)+" ")])]),a("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"100px"}},[t._v("物料编码")]),a("div",{staticStyle:{"font-size":"20px","padding-left":"5px"}},[t._v(" "+t._s(t.selectRow.code)+" ")])]),a("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"100px"}},[t._v("目标重量")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.demandWeight,expression:"demandWeight"}],ref:"demandWeight",staticStyle:{color:"red"},attrs:{type:"text"},domProps:{value:t.demandWeight},on:{blur:t.setFocus,input:function(e){e.target.composing||(t.demandWeight=e.target.value)}}})]),a("div",{staticStyle:{width:"50px"}},[t._v(t._s(t.config.viewUnit||"kg"))])]),a("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"100px"}},[t._v("实际重量")]),a("div",{staticStyle:{"font-size":"28px","padding-left":"5px","font-weight":"bold",color:"red"}},[t._v(" "+t._s(t.setKg(t.WeighingInformation[t.selectRow.address].total))+" ")]),a("div",{staticStyle:{width:"50px"}},[t._v(t._s(t.config.viewUnit||"kg"))])]),a("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticStyle:{width:"100px"}},[t._v("差 异 量")]),a("div",{staticStyle:{"font-size":"20px","padding-left":"5px"}},[t._v(" "+t._s(t.setKg(t.WeighingInformation[t.selectRow.address].difference))+" ")])])]),a("div",{staticClass:"manualBodycall"},[a("div",{staticClass:"callItemCall"},[a("img",{staticClass:"imgs",attrs:{src:t.setImage(t.WeighingInformation[t.selectRow.address].feedingStatus,t.selectRow.address),alt:""}}),a("div",{staticClass:"portResult"},[t._v(" "+t._s(t.setKg(t.portResult[t.selectRow.address]))+" "),a("span",{staticClass:"portResultUnit"},[t._v(t._s(t.config.viewUnit||"kg"))])]),a("div",{staticClass:"WeighingInfoClass"},[t._v(" "+t._s(t.setWeighingInfo(t.WeighingInformation[t.selectRow.address].feedingStatus))+" ")]),a("div",{staticClass:"callAggregateValue"},[a("div",{staticClass:"items"},[a("p",[t._v("目标重量")]),a("p",{staticClass:"itemValue"},[-1!=t.WeighingInformation[t.selectRow.address].feedingStatus?a("span",[t._v(t._s(t.setKg(t.WeighingInformation[t.selectRow.address].demandWeight)))]):t._e()])]),a("div",{staticClass:"items"},[a("p",[t._v("实际称量")]),a("p",{staticClass:"itemValue",staticStyle:{color:"red"}},[-1!=t.WeighingInformation[t.selectRow.address].feedingStatus?a("span",[t._v(t._s(t.setKg(t.WeighingInformation[t.selectRow.address].total)))]):t._e()])]),a("div",{staticClass:"items"},[a("p",[t._v("差  异  值")]),a("p",{staticClass:"itemValue"},[-1!=t.WeighingInformation[t.selectRow.address].feedingStatus?a("span",[t._v(t._s(t.setKg(t.WeighingInformation[t.selectRow.address].difference)))]):t._e()])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.WeighingInformation[t.selectRow.address].feedingStatus||8==t.WeighingInformation[t.selectRow.address].feedingStatus||2==t.WeighingInformation[t.selectRow.address].feedingStatus||3==t.WeighingInformation[t.selectRow.address].feedingStatus,expression:"\n              WeighingInformation[selectRow.address].feedingStatus == 4 ||\n              WeighingInformation[selectRow.address].feedingStatus == 8 ||\n              WeighingInformation[selectRow.address].feedingStatus == 2 ||\n              WeighingInformation[selectRow.address].feedingStatus == 3\n            "}],staticClass:"itemMadol"},[a("div",{staticStyle:{padding:"15px",color:"red","font-size":"18px"}},[t._v(" "+t._s(4==t.WeighingInformation[t.selectRow.address].feedingStatus?"加料异常":8==t.WeighingInformation[t.selectRow.address].feedingStatus?"已完成":2==t.WeighingInformation[t.selectRow.address].feedingStatus||3==t.WeighingInformation[t.selectRow.address].feedingStatus?"已满;请换桶":"")+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:8==t.WeighingInformation[t.selectRow.address].feedingStatus,expression:"\n                WeighingInformation[selectRow.address].feedingStatus == 8\n              "}],staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:function(e){return t.ResetData(2)}}})],1)])])])])]),a("vxe-modal",{attrs:{width:"600","show-footer":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",[a("div",{staticClass:"multiColumn"},[a("div",[t._v("物料名称")]),a("div",[t._v(t._s(t.selectRow.pipeName))])]),a("div",{staticClass:"multiColumn"},[a("div",[t._v("物料编码")]),a("div",[t._v(t._s(t.selectRow.pipeCode))])]),a("div",{staticClass:"multiColumn"},[a("div",[t._v("需求重量")]),a("div",[t._v(t._s(t.selectRow.quantity))])]),a("p",[a("vxe-button",{attrs:{status:"primary",content:"确定"},on:{click:t.submit}})],1)])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},A=[],I={props:["value","config","focusLock","modeSwitch"],data:function(){return{imgs:[v.a,w.a,_.a,x.a],height:document.documentElement.clientHeight||document.body.clientHeight,communication:{},show:!1,dayTime:(new Date).toLocaleString(),list:[],selectRow:{code:"",codeName:"",pipe:"0",address:1,flow:"0",AD:"0",VAD:"0",lAD:"0",lADA:"0",hAD:"0",hADA:"0",PAD:"0",ConversionRate:"0",maxHAD:"0",lowDigit:"0",HighDigit:"0"},demandWeight:0,ManualTasksSwitchLock:0,portResult:[0,0,0,0],WeighingInformation:[{total:0},{total:0},{total:0},{total:0}],recordShow:!1,WeighingAuthority:"0"}},watch:{value:function(t,e){this.selectRow={code:"",codeName:"",pipe:"0",address:1,flow:"0",AD:"0",VAD:"0",lAD:"0",lADA:"0",hAD:"0",hADA:"0",PAD:"0",ConversionRate:"0",maxHAD:"0",lowDigit:"0",HighDigit:"0"}}},methods:{init:function(){var t=this;try{var e=__communication.queryData(),i=JSON.parse(e.resultData)||{code:-1},a=i.fromData,s=(i.COMStart,i.portResult),n=(i.portPLCResultStart,i.dataStart,i.code),o=i.modeSwitch,l=i.ManualTasksSwitchLock,c=i.waterLevelInfoJson,r=i.manualTasksJson,u=i.WeighingAuthority;if(-1==n)return;if(this.value!=o&&this.$emit("input",o),this.modeSwitch=o,2!=o)return this.$emit("initFocus");this.WeighingAuthority=u;var m=this.WeighingInformation[1].feedingStatus;m!=a.WeighingInformation[1].feedingStatus&&console.log(a.WeighingInformation,this.selectRow.address),this.WeighingInformation=a.WeighingInformation||[{total:0},{total:0},{total:0},{total:0}],this.portResult=s,this.ManualTasksSwitchLock=l;var d=JSON.parse(c)||[];d.forEach((function(e){var i=t.config.maxWaterLevel>0&&0!=e.VAD?e.VAD/t.config.maxWaterLevel:0;i=i>1?1:i,e.PAD=i<0?0:100*i})),this.list=d;for(var f=!0,p=0;p<this.WeighingInformation.length;p++){var g=this.WeighingInformation[p],v=g.feedingStatus;v>1&&v<8&&(f=!1)}if(f){var h={};if(r){var w=JSON.parse(r)||[];h=w[w.length-1]||{}}h.pipe?this.selectRow=d[h.pipe-1]:this.selectRow=this.$options.data().selectRow}}catch(C){console.log(C)}this.setFocus(),this.dayTime=(new Date).toLocaleString(),this.$emit("manualLockOk")},BarrelDetection:function(){},setSelectRow:function(t){__communication.addManual(""+t.pipe)},submit:function(){if(this.selectRow.pipe>0&&this.demandWeight>0&&1==this.ManualTasksSwitchLock){var t=this.config||{},e=t.viewUnit||"kg";e=e.toUpperCase();var i=1;switch(e){case"G":i=1;break;case"KG":i=1e3;break;default:i=1;break}var a={pipe:this.selectRow.pipe,demandWeight:parseInt(this.demandWeight*i)};__communication.manualSubmit(JSON.stringify(a))}},GetConfig:function(){this.$emit("GetConfig")},setPipe:function(t){var e=t%6||6,i=Math.ceil(t/6);return 1==i?"A"+e:2==i?"B"+e:3==i?"C"+e:4==i?"D"+e:void 0},setFocus:function(){try{if(console.log("手动焦点",this.focusLock,2!=this.modeSwitch),this.focusLock||2!=this.modeSwitch)return;this.$refs.demandWeight.focus()}catch(t){}},setKg:function(t){var e=t;try{var i=this.config||{},a=i.decimalPlaces||0,s=i.viewUnit||"kg";s=s.toUpperCase();var n=1;switch(s){case"G":n=1;break;case"KG":n=1e3;break;default:n=1;break}e=Number(t/n).toFixed(a)||0}catch(o){e=0}return"NaN"==e&&(e=""),e},setToFixed:function(t){var e=t;try{e=Number(t).toFixed(1)||0}catch(i){e=0}return"NaN"==e&&(e=""),e},setImage:function(t,e){var i=this.config||{},a=i.barrelWeight||150,s=this.portResult[e],n=this.imgs,o=n[0];switch(t){case-1:case 0:o=s>a?n[1]:n[0];break;case 1:o=n[1];break;case 4:case 5:case 6:case 7:o=n[2];break;case 2:case 3:case 8:o=n[3];break;default:break}return o},setWeighingInfo:function(t){var e="";switch(t){case-1:e="空闲中";break;case 0:e="请放桶";break;case 1:e="准备完毕";break;case 2:case 3:e="已满";break;case 4:e="加料异常";break;case 5:e="加料中";break;case 6:case 7:e="保存记录";break;case 8:e="已完成";break;default:break}return e},ResetData:function(){var t=this.selectRow.address+""||"0";__communication.ViewEnter(t+"")},key__fn:function(t){switch(t.keyCode){case 13:this.submit();var e=this.selectRow.address+""||"0";__communication.ViewEnter(e);break;case 27:for(var i=this.WeighingInformation,a=!0,s=0;s<i.length;s++){var n=i[s],o=n.feedingStatus;o>1&&o<8&&(a=!1)}a&&(this.demandWeight="0",__communication.manualOff(""));break}}},mounted:function(){}},T=I,L=(i("efa1"),Object(c["a"])(T,R,A,!1,null,"e896bd56",null)),P=L.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waterLevel"},[i("p",{staticClass:"waterLevelTitle"},[t._v(" 水位效正 "),i("span",{staticStyle:{float:"right"}},[i("vxe-button",{attrs:{status:"primary",content:"返回"},on:{click:function(e){return t.$emit("initFocus")}}})],1)]),i("div",{staticClass:"waterLevelBody",style:{height:t.height-90+"px"}},[i("div",{staticClass:"waterLevelList"},t._l(t.list,(function(e,a){return i("p",{key:a,class:{waterLeveItem:!0,actionWaterLeve:e.pipe==t.selectRow.pipe},on:{click:function(e){return t.itemClick(a)}}},[t._v(" "+t._s(e.codeName)+" "+t._s(t.setPipe(e.pipe))+" ")])})),0),i("div",{staticClass:"waterLevelCenter"},[i("p",{staticStyle:{height:"35px"}},[t._v(" "+t._s(t.selectRow.codeName||"")+" "+t._s(t.setPipe(t.selectRow.pipe)||"")+" ")]),t._m(0),i("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[i("div",[t._v("低端")]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectRow.lAD,expression:"selectRow.lAD"}],attrs:{type:"text"},domProps:{value:t.selectRow.lAD},on:{input:function(e){e.target.composing||t.$set(t.selectRow,"lAD",e.target.value)}}})]),i("div",{staticClass:"multiColumn3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectRow.lADA,expression:"selectRow.lADA"}],attrs:{type:"text"},domProps:{value:t.selectRow.lADA},on:{input:function(e){e.target.composing||t.$set(t.selectRow,"lADA",e.target.value)}}})])]),i("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[i("div",[t._v("高端")]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectRow.hAD,expression:"selectRow.hAD"}],attrs:{type:"text"},domProps:{value:t.selectRow.hAD},on:{input:function(e){e.target.composing||t.$set(t.selectRow,"hAD",e.target.value)}}})]),i("div",{staticClass:"multiColumn3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectRow.hADA,expression:"selectRow.hADA"}],attrs:{type:"text"},domProps:{value:t.selectRow.hADA},on:{input:function(e){e.target.composing||t.$set(t.selectRow,"hADA",e.target.value)}}})])]),i("div",{staticClass:"multiColumn",staticStyle:{"margin-bottom":"10px"}},[i("div",[t._v("当前值")]),i("div",{staticStyle:{"font-size":"16px",color:"#333"}},[t._v(t._s(t.selectRow.AD))]),i("div",{staticClass:"multiColumn3",staticStyle:{"font-size":"16px",color:"#333"}},[t._v(t._s(t.selectRow.VAD))])]),i("p",{staticStyle:{"text-align":"end"}},[i("vxe-checkbox",{attrs:{content:"启用水位报警"},model:{value:t.selectRow.enableAlert,callback:function(e){t.$set(t.selectRow,"enableAlert",e)},expression:"selectRow.enableAlert"}}),t._v("    "),i("vxe-button",{attrs:{status:"primary",content:"校正",disabled:0==t.selectRow.pipe},on:{click:t.submit}})],1)])])])},O=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"centerTitle"},[i("span",{staticClass:"span"},[t._v("AD")]),i("span",{staticClass:"span"},[t._v("水高")])])}],E={data:function(){return{height:document.documentElement.clientHeight||document.body.clientHeight,communication:{},selectRow:{code:"",codeName:"",pipe:0,address:"",flow:"",AD:"",VAD:"",lAD:"",lADA:"",hAD:"",hADA:"",PAD:"",ConversionRate:"",maxHAD:"",lowDigit:"",HighDigit:"",enableAlert:!1},list:[]}},methods:{init:function(){var t=this;try{var e=this.communication.getWaterLevelSubmit(),i=JSON.parse(e.waterLevelInfoJson)||[],a=0,s=0;Array.isArray(i)?i.forEach((function(e){e.pipe==t.selectRow.pipe&&(a=e.AD,s=e.VAD)})):i=[],this.list=i,this.selectRow.pipe>0&&(this.selectRow.AD=a,this.selectRow.VAD=s)}catch(n){}},itemClick:function(t){console.log(this.list[t]);var e=JSON.parse(JSON.stringify(this.list[t]));e.enableAlert=!!e.enableAlert,this.selectRow=e},submit:function(){var t=JSON.parse(JSON.stringify(this.selectRow));t.lAD=isNaN(Number(t.lAD))?0:Number(t.lAD),t.lADA=isNaN(Number(t.lADA))?0:Number(t.lADA),t.hAD=isNaN(Number(t.hAD))?0:Number(t.hAD),t.hADA=isNaN(Number(t.hADA))?0:Number(t.hADA),t.enableAlert=t.enableAlert?1:0;var e=this.communication.waterLevelSubmit(JSON.stringify(t));console.log(e)},setPipe:function(t){var e=t%6||6,i=Math.ceil(t/6);return 1==i?"A"+e:2==i?"B"+e:3==i?"C"+e:4==i?"D"+e:void 0}},mounted:function(){var t=this;setTimeout((function(){t.communication=window.Formium.external.communication}),1e3)}},M=E,J=(i("5e26"),Object(c["a"])(M,$,O,!1,null,"035e2bd8",null)),F=J.exports,V={name:"index",components:{SimulatedEnvironment:D,Manual:P,WaterLevel:F},data:function(){return{modelShow:!1,manualLockShow:!1,WeighingAuthority:"0",WeighingAuthorityShow:!1,modeSwitch:1,SimulationTestShow:!1,communication:null,shiftConfigShow:!1,registerShow:!1,appletRegisterShow:!1,CuttingMethod:1,upwd:"",manualLockUpwd:"",manualLockUpwd_1:"",imgs:[v.a,w.a,_.a,x.a],itemNo:"",focus:0,tempFocus:5,height:document.documentElement.clientHeight||document.body.clientHeight,WeighingStateList:[0,0,0,0],formData:{itemNo:"",clothWeight:"",color:"",unit:"KG",list:[],realTime:[0,0,0,0],WeighingInformation:[{},{},{},{}]},time:null,failItemNo:"",config:{allowableError:"",capacity:"",reduce:"",StopTime:"",compensate:"",compensationCoefficient:"",fns:[],materials:[],ways:[],way:1,user:"",upwd:"",ip:"",port:"",tableName:"",connect1:"",connect2:"",connect3:"",maxWaterLevel:0,alarmWaterLevel1:0,alarmWaterLevel2:0,WaterLevelNuit:""},setIntervalTime:null,dayTime:(new Date).toLocaleString(),list:[],listAll:[[],[],[],[]],dataStart:!0,COMStart:[0,0,0,0],portResult:[0,0,0,0],itemMadolShow:[!1,!1,!1,!1,!1],dyeingClassList:[],dyeingClassShow:!1,RequltData:{itemNo:"",dyeingClass:""},SelectTime:{startTime:new Date,endTime:new Date},recordData:[],requestRecord:{itemNo:"",dateTime:"",isNotShow:!0},CompletionPrompt:!1,selectRow:{},selectRowIndex:-1,shiftIdentification:[{code:"1",name:"早"},{code:"2",name:"中"},{code:"3",name:"晚"}],shiftConfigTime:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],shiftConfig:{code:"1",codeName:"",startTime:"",endTime:""},shiftsConfig:[],registerConfig:{corporateName:"",corporateAddress:"",telePhoneList:[],mac:"",upwd:"",Token:"",invitationCode:""},registerConfigTelephone:"",corpratePhoneList:[],waterLevelList:[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],checkValue:""}},watch:{itemNo:function(t,e){var i=this;0==this.focus&&this.time&&(clearTimeout(this.time),this.time=null),this.time=setTimeout((function(){var e=t.split(" ").join("");if(e!=t)i.itemNo=e;else{var a={itemNo:t,dyeingClass:""};i.requestRecord.itemNo=t,i.requestRecord.dateTime=(new Date).getTime(),i.requestRecord.isNotShow=!0;var s=__communication.submitItemNo(JSON.stringify(a));-2==s.code?i.failItemNo=t:i.failItemNo=""}}),500)},focus:function(t,e){this.blur()},modelShow:function(t,e){t&&(this.upwd="")},appletRegisterShow:function(t,e){t&&this.getCorporatePhone()},modeSwitch:function(t,e){setTimeout((function(){__communication.setFocus();var t={itemNo:"",dyeingClass:""};__communication.submitItemNo(JSON.stringify(t))}),300),1==t&&(this.manualLockUpwd_1="")}},methods:{initFocus:function(){this.focus=0},cellClick:function(t){var e=t.row;t.rowIndex;this.formData.WeighingInformation[e.address].feedingStatus<2&&this.formData.WeighingInformation[e.address].total<2&&0==e.itemWeighingState&&__communication.cellClick(JSON.stringify({id:e.id,address:e.address}))},setSimulationTestShow:function(){this.SimulationTestShow=!0,this.focus=0,__communication.openSimulationTest()},inputDblclick:function(){__communication.openKeyboard()},close:function(){var t=this;this.$XModal.confirm("您确定要关闭吗？").then((function(e){"confirm"==e&&(clearInterval(t.setIntervalTime),__communication.close())}))},blur:function(){if(!(this.modelShow||this.dyeingClassShow||this.WeighingAuthorityShow))try{switch(this.focus){case-1:this.$refs.itemNo_off.focus();break;case 0:this.$refs.itemNo.focus();break;case 9:this.$refs.manual.setFocus();break;default:break}}catch(t){console.log("获取焦点失败")}},submitItemNoCallback:function(){if(this.failItemNo.length>0){var t={itemNo:this.itemNo,dyeingClass:this.RequltData.dyeingClass};__communication.submitItemNo(JSON.stringify(t)),this.failItemNo=""}},bodyClick:function(){console.log("点击事件"),this.blur(),this.$refs.manual.setFocus()},setKg:function(t){var e=t;try{var i=this.config||{},a=i.decimalPlaces||0,s=i.viewUnit||"kg";s=s.toUpperCase();var n=1;switch(s){case"G":n=1;break;case"KG":n=1e3;break;default:n=1;break}e=Number(t/n).toFixed(a)||0}catch(o){e=0}return"NaN"==e&&(e=""),e},queryData:function(){var t=this;if(!(this.modelShow||this.dyeingClassShow||this.WeighingAuthorityShow))if(this.focus>4)8==this.focus?this.$refs.waterLevel.init():9==this.focus&&this.$refs.manual.init();else{try{var e=[],i=[],a=[],s=__communication.queryData(),n=JSON.parse(s.resultData)||{code:-1},o=n.fromData,l=n.COMStart,c=n.portResult,r=n.portPLCResultStart,u=n.dataStart,m=n.code,d=n.modeSwitch,f=n.WeighingAuthority,g=n.waterLevelInfoJson,v=void 0===g?"":g;if(this.WeighingAuthority=f||"0",-1==m)return;if(2==d)return this.focus=9;r<10&&l[0]<10?l[0]=0:l[0]=10,this.formData=o;var h=0;this.formData.WeighingInformation.forEach((function(e,i){var a=e.feedingStatus||1;i>0&&(a<2&&h++,2==e.feedingStatus||3==e.feedingStatus||4==e.feedingStatus||8==e.feedingStatus?t.itemMadolShow[i]=!0:t.itemMadolShow[i]=!1)})),this.formData.WeighingInformation.forEach((function(e,i){i>0&&(t.itemMadolShow[i]||t.focus!=i||(t.focus=-1))})),this.COMStart=l,this.portResult=c,this.dataStart=u;var w=[];w=[].concat(Object(p["a"])(this.formData.list.filter((function(t){return 2==t.itemWeighingState}))),Object(p["a"])(this.formData.list.filter((function(t){return 1==t.itemWeighingState}))),Object(p["a"])(this.formData.list.filter((function(t){return 0==t.itemWeighingState}))));var C="";if(w.forEach((function(t){var s=t.id+"_"+t.itemWeighingState+"_"+t.itemNo+";";C+=s,2!=t.itemWeighingState&&(1==t.address&&e.push(t),2==t.address&&i.push(t),3==t.address&&a.push(t))})),this.checkValue!=C||""==C){var _=[[],e,i,a];this.listAll=_,this.list=w,this.checkValue=C}if(3!=h)1==this.focus&&2==this.focus&&3==this.focus&&4==this.focus||(this.focus=-1,this.formData.WeighingInformation.forEach((function(e,i){i>0&&(!t.itemMadolShow[i]||1==t.focus&&2==t.focus&&3==t.focus&&4==t.focus||(t.focus=i))})));else if(this.itemMadolShow=[!1,!1,!1,!1],this.focus=0,this.config.dyeingClass){var y=[];this.list.forEach((function(t){t.dyeingClass&&-1==y.indexOf(t.dyeingClass)&&y.push(t.dyeingClass)})),this.dyeingClassList=y,y.length>1?(this.dyeingClassShow=!0,this.focus=-2,this.$refs.vxeSelect.focus()):this.RequltData.dyeingClass=""}var x=JSON.parse(v);x.forEach((function(e){var i=t.config.maxWaterLevel>0&&0!=e.VAD?e.VAD/t.config.maxWaterLevel:0;i=i>1?1:i,e.PAD=i<0?0:100*i})),this.waterLevelList=x}catch(S){console.log(S)}if(Array.isArray(this.formData.list)&&!this.dyeingClassShow){var b=0;this.formData.list.forEach((function(t){2==t.itemWeighingState&&b++})),b==this.formData.list.length&&b>0?this.requestRecord.isNotShow&&(this.requestRecord.isNotShow=!1,this.CompletionPrompt=!0):this.CompletionPrompt=!1}else this.CompletionPrompt=!1;this.manualLockOk(),this.$forceUpdate()}},dyeingClassSave:function(){this.RequltData.itemNo=this.itemNo,__communication.submitItemNo(JSON.stringify(this.RequltData)),this.focus=0,this.dyeingClassShow=!1},rowClassName:function(t){var e=t.row;t.rowIndex;try{return 2==e.itemWeighingState?"xTableSelectRow_2":1==e.itemWeighingState?"xTableSelectRow_1":e.id==this.selectRow.id?"xTableSelectRow_Id":"xTableSelectRow_0"}catch(i){console.log("行颜色设置错误",this.selectRow)}},GetConfig:function(){var t=!0;this.formData.WeighingInformation.forEach((function(e){var i=e.feedingStatus||-1;i>1&&(t=!1)})),t?this.modelShow=!0:this.$XModal.message({content:"请结束称料再操作 "})},madolOk:function(){if("1951"==this.upwd||7==this.tempFocus){this.focus=this.tempFocus,this.modelShow=!1;var t=__communication.GetConfig();t.dyeingClass=!!t.dyeingClass,this.config=t}else this.$XModal.message({content:"密码错误"});7==this.tempFocus&&this.quertRceord()},SetConfig:function(){var t=this;this.focus=0,setTimeout((function(){t.config.materials.forEach((function(t){delete t._X_ROW_KEY})),t.config.fns.forEach((function(t){delete t._X_ROW_KEY}));var e=JSON.parse(JSON.stringify(t.config));e.dyeingClass=e.dyeingClass?1:0,__communication.SetConfig(JSON.stringify(e))}),300),this.blur()},ResetData:function(t){var e=this;switch(t){case 1:this.$XModal.confirm("您确定要重置当前料单吗？").then((function(t){if("confirm"==t){var i={itemNo:"",dyeingClass:""};__communication.submitItemNo(JSON.stringify(i)),e.itemNo=""}}));break;case 2:console.log("回车,确定",this.focus),__communication.ViewEnter(this.focus+"");break;default:break}},setWeighingInfo:function(t){var e="";switch(t){case-1:e="空闲中";break;case 0:e="请放桶";break;case 1:e="准备完毕";break;case 2:case 3:e="已满";break;case 4:e="加料异常";break;case 5:e="加料中";break;case 6:case 7:e="保存记录";break;case 8:e="已完成";break;default:break}return e},setPipe:function(t){var e=t%6||6,i=Math.ceil(t/6);return 1==i?"A"+e:2==i?"B"+e:3==i?"C"+e:4==i?"D"+e:void 0},setAddress:function(t){return 1==t?"A称":2==t?"B称":3==t?"C称":4==t?"D称":0==t?"PLC":void 0},ArraySort:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ASC",a=JSON.parse(JSON.stringify(t)),s=a.length,n=0;n<s;n++)for(var o=n;o>0;o--)if(e){if(a[o][e]<a[o-1][e]){var l=[a[o],a[o-1]];a[o-1]=l[0],a[o]=l[1]}}else if(a[o]<a[o-1]){var c=[a[o],a[o-1]];a[o-1]=c[0],a[o]=c[1]}return"ASC"==i?a:a.reverse()},setImage:function(t,e){var i=this.config||{},a=i.barrelWeight||150,s=this.portResult[e],n=this.imgs,o=n[0];switch(t){case-1:case 0:o=s>a?n[1]:n[0];break;case 1:o=n[1];break;case 4:case 5:case 6:case 7:o=n[2];break;case 2:case 3:case 8:o=n[3];break;default:break}return o},key__fn:function(t){var e=this;if(1==this.focus||2==this.focus||3==this.focus||4==this.focus){var i=[];this.itemMadolShow.forEach((function(t,e){t&&i.push(e)}));var a=i.indexOf(this.focus);switch(t.keyCode){case 37:a-=1,a<0&&(a=0),this.focus=i[a];break;case 39:a+=1,a>=i.length&&(a=i.length-1),this.focus=i[a];break}}switch(t.keyCode){case 13:if(this.CompletionPrompt=!1,this.focus>0&&this.focus<5&&(this.ResetData(2),4==this.formData.WeighingInformation[this.focus].feedingStatus)){var s=0;if(this.formData.WeighingInformation.forEach((function(t){var e=t.feedingStatus||1;(e<2||4==t.feedingStatus)&&s++})),4==s){var n={itemNo:"",dyeingClass:""};__communication.submitItemNo(JSON.stringify(n)),this.itemNo=""}else this.$XModal.message({content:"请等待其它称,称料完成后再操作"})}this.modelShow?this.madolOk():this.dyeingClassShow&&setTimeout((function(){e.dyeingClassSave()}),500),console.log(this.selectRow),0==this.selectRow.itemWeighingState&&this.selectRow.id>0&&this.cellClick({row:this.selectRow,rowIndex:0}),this.manualLockShow&&this.manualLockOk(1);break;case 27:this.CompletionPrompt=!1;var o=0;if(this.formData.WeighingInformation.forEach((function(t){var e=t.feedingStatus||1;(e<2||4==e)&&o++})),4==o){var l={itemNo:"",dyeingClass:""};__communication.submitItemNo(JSON.stringify(l)),this.itemNo=""}this.modelShow=!1,this.dyeingClassShow=!1;break;default:break}if(this.focus<4)switch(t.keyCode){case 38:case 33:this.setSelectRow(-1);break;case 40:case 34:this.setSelectRow(1);break}this.$refs.manual.key__fn(t)},setSelectRow:function(t){var e=this;try{var i=-1,a=-1;console.log(this.selectRow.id),this.list.forEach((function(t,s){t.id==e.selectRow.id&&0==t.itemWeighingState&&(i=s),-1==a&&0==t.itemWeighingState&&(a=s)}));var s={};if(i>-1){var n=i+t;n;var o=this.list[n],l=0==o.itemWeighingState&&o.id>0?o:this.list[i];s=JSON.parse(JSON.stringify(l))||{}}else a>-1&&(a,s=JSON.parse(JSON.stringify(this.list[a]))||{});this.selectRow=s;try{s.id&&this.$refs.detailedTable.scrollToRow(s,"seq")}catch(c){}}catch(c){console.log("设置选中行错误")}},quertRceord:function(){var t=JSON.parse(JSON.stringify(this.SelectTime));t.startTime=new Date(new Date(t.startTime).format("y/m/d",!1)+" 00:00:00").getTime(),t.endTime=new Date(new Date(t.endTime).format("y/m/d",!1)+" 23:59:59").getTime();var e=__communication.quertRceord(JSON.stringify(t));Array.isArray(e)&&(e.forEach((function(t){var e=t.saveTime-0||new Date.getTime;t.saveTime=new Date(e).format("y-m-d h:i:s")})),this.recordData=e)},delShift:function(t){this.shiftsConfig.splice(t,1)},addShift:function(){var t=this,e=!0;this.shiftsConfig.forEach((function(i){i.code==t.shiftConfig.code&&(e=!1)})),e?(this.shiftsConfig.push({shiftType:this.shiftConfig.code,shiftName:this.shiftConfig.codeName,shiftCreateTime:this.shiftConfig.startTime,shiftEndTime:this.shiftConfig.endTime}),this.shiftConfig={code:"1",codeName:"",startTime:"",endTime:""}):this.$XModal.message({content:"标识重复,请重新选中班次标识"})},addTelephone:function(){var t=this;if(!this.isPhone(this.registerConfigTelephone))return this.$XModal.message({content:"请输入正确格式的手机号码"});var e=!0;this.corpratePhoneList.forEach((function(i){i.corporatePhone==t.registerConfigTelephone&&(e=!1)})),e&&(__communication.updateCorporatePhone(this.registerConfigTelephone),this.getCorporatePhone())},isPhone:function(t){var e=/^(0|86|17951)?(13[0-9]|15[012356789]|18[0-9]|14[57]|17[678])[0-9]{8}$/;return e.test(t)?(console.log("手机号码格式输入正确"),!0):(console.log("请输入正确格式的手机号码"),!1)},submitShift:function(){var t=this;setTimeout((function(){var e=JSON.parse(JSON.stringify(t.shiftsConfig));e.forEach((function(t){delete t._X_ROW_KEY})),__communication.SetShiftConfig(JSON.stringify(e)),t.shiftConfigShow=!1}),300)},submitRegistry:function(){var t=this;setTimeout((function(){new Promise((function(e,i){var a=__communication.SetRegistryConfig(JSON.stringify(t.registerConfig));e(a)})).then((function(e){e=e||{},t.$XModal.message({content:e.wxServerRes.message||""})})).catch(),t.registerShow=!1}),300)},queryConfig:function(){try{var t=__communication.GetConfig(),e=__communication.GetConfig("1"),i=__communication.GetConfig("2");t.dyeingClass=!!t.dyeingClass,this.config=t,this.registerConfig=e||{},this.shiftsConfig=i||[],this.registerConfig.telePhoneList=this.registerConfig.telePhoneList||[]}catch(a){}},delRow:function(t){var e=this.corpratePhoneList[t],i=JSON.stringify({corporateToken:e.corporateToken,corporatePhone:e.corporatePhone});__communication.deleteCorporatePhone(i),this.getCorporatePhone()},getCorporatePhone:function(){var t=__communication.getCorporatePhone()||{};console.log(t);var e=t.wxServerRes.infoMap||{},i=e.corpratePhoneList||[];this.corpratePhoneList=i},setCommunication:function(){var t=this;window.Formium&&window.Formium.external?window.__communication=window.Formium.external.communication:setTimeout((function(){t.setCommunication()}),1e3)},setWeighingAuthority:function(){if("1"==this.WeighingAuthority)return this.$XModal.message({content:"已注册"});var t=__communication.GetConfig();t.dyeingClass=!!t.dyeingClass,this.config=t,this.WeighingAuthorityShow=!0},setWeighingAuthority_:function(){var t=__communication.setWeighingAuthority(this.config.EquipmentIdentificationCode);if(1!=t.code)return this.$XModal.message({content:"注册码错误"});this.WeighingAuthorityShow=!1},manualLockOk:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.config.manualLock||"";e.length>0&&2==this.modeSwitch?t?this.manualLockUpwd==e?(this.manualLockUpwd_1=this.manualLockUpwd,this.manualLockUpwd="",this.manualLockShow=!1):this.$XModal.message({content:"密码错误"}):this.manualLockUpwd_1==e?this.manualLockShow=!1:this.manualLockShow=!0:this.manualLockShow=!1}},mounted:function(){var t=this;this.$nextTick((function(){window.submitItemNoCallback=t.submitItemNoCallback,document.body.addEventListener("keydown",t.key__fn),t.setIntervalTime&&clearInterval(t.setIntervalTime),t.setIntervalTime=setInterval((function(){t.queryData(),t.dayTime=(new Date).toLocaleString();try{t.config&&1==t.config.programLock&&__communication.setActive()}catch(e){}}),1e3),setTimeout((function(){var e=__communication.GetConfig();e.dyeingClass=!!e.dyeingClass,t.config=e,t.blur()}),1e3)})),this.setCommunication()}},q=V,U=(i("e8d7"),Object(c["a"])(q,d,f,!1,null,"3163d9fb",null)),z=U.exports;a["a"].use(m["a"]);var G=[{path:"/",name:"index",component:z}],B=new m["a"]({routes:G}),K=B,j=i("2f62");a["a"].use(j["a"]);var X=new j["a"].Store({state:{},mutations:{},actions:{},modules:{}}),H=(i("c695"),i("a388")),Y=i.n(H);i("778e"),i("cd22");a["a"].prototype.$XModal=Y.a.modal,a["a"].prototype.$XPrint=Y.a.print,a["a"].prototype.$XSaveFile=Y.a.saveFile,a["a"].prototype.$XReadFile=Y.a.readFile,a["a"].use(Y.a),a["a"].config.productionTip=!1,window.submitItemNoCallback=function(t){},window.addEventListener("hostactivated",(function(){console.log("hostactivated","窗体已经激活,并未获取焦点"),window.Formium.external.communication.setFocus()})),window.addEventListener("load",(function(){console.log("load","页面加载完毕")})),Date.prototype.format=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y-m-d h:i:s",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getFullYear(),a=this.getMonth()+1,s=this.getDate(),n=this.getHours(),o=this.getMinutes(),l=this.getSeconds(),c=t.replace(/y+/gi,i);return c=c.replace(/m+/gi,(a<10&&e?"0":"")+a),c=c.replace(/d+/gi,(s<10&&e?"0":"")+s),c=c.replace(/h+/gi,(n<10&&e?"0":"")+n),c=c.replace(/i+/gi,(o<10&&e?"0":"")+o),c=c.replace(/s+/gi,(l<10&&e?"0":"")+l),c},a["a"].prototype.$toFixed_1=function(t){var e=Number(t)||0;return isNaN(e)?0:e.toFixed(1)},new a["a"]({router:K,store:X,render:function(t){return t(u)}}).$mount("#app")},"5e26":function(t,e,i){"use strict";i("feaa")},"6d18":function(t,e,i){t.exports=i.p+"img/a4.a5faf8a7.bmp"},"7c55":function(t,e,i){"use strict";i("2395")},"87df":function(t,e,i){},cd22:function(t,e,i){},cf05:function(t,e,i){t.exports=i.p+"img/logo.b11473be.png"},e8d7:function(t,e,i){"use strict";i("26cd")},e9ae:function(t,e,i){"use strict";i("474b")},e9f2:function(t,e,i){t.exports=i.p+"img/a3.658a1c23.bmp"},ef4f:function(t,e,i){t.exports=i.p+"img/a1.92dad038.bmp"},efa1:function(t,e,i){"use strict";i("87df")},feaa:function(t,e,i){}});
//# sourceMappingURL=app.b9d890a8.js.map